@page "/publications"
@inject DailyDeBugle.Services.IPublicationService PublicationService
@using DailyDeBugle.Models

<h3>Publications</h3>

<a class="btn btn-success mb-3" href="/publications/create">+ New Publication</a>

@if (publications == null)
{
    <p>Loading...</p>
}
else if (publications.Count == 0)
{
    <p>No publications found.</p>
}
else
{
    <table class="table table-striped">
        <thead>
        <tr>
            <th>Name</th>
            <th>Description</th>
            <th>Created</th>
            <th>Status</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var pub in publications)
        {
            <tr>
                <td>@pub.Name</td>
                <td>@pub.Description</td>
                <td>@pub.CreatedDate.ToShortDateString()</td>
                <td>@(pub.IsActive ? "Active" : "Inactive")</td>
            </tr>
        }
        </tbody>
    </table>
}

@code {
    private List<Publication>? publications;

    protected override async Task OnInitializedAsync()
    {
        publications = await PublicationService.GetPublicationsAsync();
    }
}